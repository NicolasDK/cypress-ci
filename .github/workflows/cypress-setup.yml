name: ci
on: [push]
jobs:
  tests:
    runs-on: ubuntu-20.04
    steps:
      - name: Checkout ðŸ›Ž
        uses: actions/checkout@v3

      - name: Write the cypress.env.json file ðŸ“
        # run: |
        #   echo '${{ secrets.CYPRESS_ENV_CI }}' > cypress.env.json
        uses: DamianReeves/write-file-action@master
        with:
          path: ${{ env.home }}/cypress.env.json
          contents: |
            ${{ secrets.CYPRESS_ENV_CI }}
          write-mode: append

      - name: Cypress run ðŸš€
        uses: cypress-io/github-action@v3

      - name: Save screenshots ðŸ–¼
        uses: actions/upload-artifact@v3
        if: always()
        with:
          name: cypress-screenshots
          path: cypress/screenshots
